“三次握手”常被面试者背得滚瓜烂熟，却鲜有人能说清为何两次不行、四次多余。客户端首报文SYN=1、seq=x，像投递一封“想和你通信，我的初始序号是x”的挂号信；服务端回SYN=1、ACK=1、seq=y、ack=x+1，既确认收到，也带上自己的序号y，相当于“信已读，我这边初始序号是y”。关键在第三次：客户端再发ACK=1、seq=x+1、ack=y+1，告诉服务端“你的回信我收到了”，至此双向“序号同步”才算完成。少了第三次，服务端无法确认客户端是否知晓自己的序号，会“傻等”并维持半开连接，久而久之耗尽资源——这就是SYN Flood攻击的原理。四次挥手却需四次，因为全双工连接中，一方说“我说完了”仅关闭写方向，对方仍可继续发数据，直到也回FIN，最终双方各自ACK，才算彻底分手。拥塞控制里，慢启动、拥塞避免、快速重传、快速恢复四件套，让TCP在“试探——加塞——探测——退让”的循环里动态找带宽；滑动窗口则允许发送方在未收到确认前连续发出多段数据，配合选择确认（SACK）只重传真正丢失的报文，把带宽利用率从“停等协议”的惨兮兮提升到“管道满负荷”。今天，打开Wireshark抓一次HTTPS网页，你能看到真实的Seq、Ack、Win、TSval字段如何跳舞；调大初始拥塞窗口（initcwnd）可把首屏时间缩短几百毫秒，却也可能在卫星链路里造成拥塞——理解这些细节，就能在CDN调优、API延迟排查、内核参数微调时做到“心中有谱”，而不仅是机械地背“三次握手、四次挥手”。
