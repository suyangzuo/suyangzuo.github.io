<article class="专题简介">
  <h1 class="简介标题">随机数<span class="原创">原创</span></h1>
  <div class="简介信息">
    <section class="简介信息文本">
      <p class="作者">
        <span class="作者前缀 前缀">作者：</span>
        <span class="作者姓名">苏扬</span>
      </p>
      <p class="日期">
        <span class="日期前缀 前缀">日期：</span>
        <span class="日期文本"><span class="日期文本-数字 日期文本-年">2024</span>年<span class="日期文本-数字 日期文本-月">4</span>月<span class="日期文本-数字 日期文本-日">9</span>日</span>
      </p>
    </section>
    <section class="简介信息图像">
      <img src="/Images/Contributors/苏扬.jpg" alt="苏扬" />
    </section>
  </div>
  <ul class="联系方式列表">
    <li class="联系方式项">
      <a class="联系方式链接" href="mailto:suyangzuo@gmail.com" target="_blank">
        <i class="fa-solid fa-envelope"></i>
      </a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://github.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-github"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.deviantart.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-deviantart"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a class="联系方式链接" href="https://dev.to/suyangzuo" target="_blank"
        ><i class="fa-brands fa-dev"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.freecodecamp.org/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-free-code-camp"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://codepen.io/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-codepen"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://dribbble.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-dribbble"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.artstation.com/user-7893655"
        target="_blank"
        ><i class="fa-brands fa-artstation"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://codesandbox.io/u/suyangzuo"
        target="_blank"
      >
        <img src="/Images/Page-Logos/CodeSandbox.png" alt="CodeSandbox"
      /></a>
    </li>
  </ul>
</article>

<div class="专题正文区">
  <article class="正文分区">
    <h2 class="分区标题 分区2级标题">
      真随机<span class="次要">vs</span>伪随机
    </h2>

    <h3 class="分区标题 分区3级标题">真随机</h3>
    <p class="分区普通文本">
      <span class="行内专业名词">真随机</span
      >只有大自然本身能够实现。空气的流动、光线的变化、声音的变化、星辰运动等等一切自然因素，都可能会影响结果，而这些条件用算法程序是无法实现的。想要真随机，最佳途径是引入自然信号，比如：
    </p>
    <ul class="分区列表">
      <li class="分区列表项">实时风速</li>
      <li class="分区列表项">实时光照</li>
      <li class="分区列表项">实时音量</li>
    </ul>
    <p class="分区普通文本">
      读取这些自然界的信号，将其转换为数字，加入到算法中，这样才可能产生真正的随机。
    </p>

    <h3 class="分区标题 分区3级标题">伪随机</h3>
    <p class="分区普通文本">
      <span class="行内专业名词">伪随机</span>只是一种相对于<span
        class="行内专业名词"
        >真随机</span
      >的说法。因为伪随机数是用特定的算法生成的，而算法是由人编写的固定代码，因此无论再复杂，也有内在规律可循。然而，我们并不需要<span
        class="行内专业名词"
        >真随机</span
      >，只要根据特定项目要求，做到这个项目需要的随机程度，就可以了。随机的程度越高，意味着<span
        class="强调"
        >越不容易被人感觉到内在规律</span
      >。因此，绝大部分情况下，只要让人<span class="行内专业名词"
        >感觉是随机的</span
      >就可以。
    </p>
  </article>

  <article class="正文分区">
    <h2 class="分区标题 分区2级标题">
      随机函数<span class="行内代码">rand()</span>
    </h2>

    <h3 class="分区标题 分区3级标题">
      <span class="行内代码">srand()</span>生成种子
    </h3>
    <p class="分区普通文本">
      几乎所有的的语言都实现了<span class="行内专业名词">随机数生成器</span
      >，用来生成<span class="行内专业名词">随机数</span>。<span
        class="行内专业名词"
        >随机数生成器</span
      >需要一个参数：<span class="行内专业名词">种子</span>。<span
        class="行内专业名词"
        >种子</span
      >用来确定<span class="行内专业名词">随机数生成器</span
      >的初始状态。一般情况下，<span class="行内专业名词">种子</span
      >符合以下规则：
    </p>
    <ul class="分区列表">
      <li class="分区列表项">必须是一个整数</li>
      <li class="分区列表项">
        <span class="行内专业名词">C语言</span>种子默认为<span class="行内代码"
          >1</span
        >
      </li>
    </ul>
    <p class="分区普通文本">
      固定的种子，会生成固定的<span class="行内专业名词">随机数序列</span
      >。举个例子：如果用<span class="行内代码"
        >1<span class="附加说明">或者其它常数</span></span
      >作为种子，那么每次生成的随机数序列都会是一样的<span class="附加说明"
        >序列内部数字彼此不同，序列和序列彼此相同</span
      >。因此，我们需要一个<span class="强调">不断变化</span
      >的种子，用来增强随机性。什么种子能够满足<span class="强调"
        >是一个整数</span
      >和<span class="强调">不断变化</span>这两个条件呢？答案是：<span
        class="专业名词"
        >时间</span
      >。
    </p>
    <pre class="line-numbers">
      <code class="lang-c">
        #include &lt;stdio.h&gt;
        #include &lt;stdlib.h&gt;  //包含此头文件，方可调用 srand() 函数
        #include &lt;time.h&gt;    //包含此头文件，方可调用 time() 函数

        int main(int argc, char* argv[]) {
            // srand()的参数必须是整数
            srand(time(NULL)); //使用当前日历时间作为种子
        }
      </code>
    </pre>
    <section class="提醒">
      <h3 class="提醒标题">提醒</h3>
      <p class="分区普通文本">
        <span class="行内代码"
          >time<span style="color: lightskyblue">(</span
          ><span style="color: goldenrod">NULL</span
          ><span style="color: lightskyblue">)</span></span
        >的作用，请参阅<a
          class="超链接"
          target="_blank"
          href="/Blogs/index.html?tech=C语言&article=时间"
          >时间</a
        >第 3 章。
      </p>
    </section>
    <p class="分区普通文本">
      注意：日历时间的变化对于电脑来说还是太慢<span class="附加说明"
        >1 秒变化 1 次</span
      >，这意味着每一秒之内生成的随机数序列依然会重复；一般情况下能凑合用。如果想要更高的随机性，就需要一个<span
        class="强调"
        >每次都不一样</span
      >的种子。
    </p>

    <h3 class="分区标题 分区3级标题">
      <span class="行内代码">rand()</span>生成随机数
    </h3>
    <p class="分区普通文本">
      随机数需要有一个<span class="行内专业名词">范围</span
      >，最小是多少，最大的是多少。<span class="行内代码">rand()</span
      >函数生成的随机数范围如下：
    </p>
    <ul class="分区列表">
      <li class="分区列表项">最小值：<span class="代码">0</span></li>
      <li class="分区列表项" style="margin-top: 0">
        最大值：<span class="代码">RAND_MAX</span>
        <section class="提醒">
          <h3 class="提醒标题">小知识</h3>
          <p class="分区普通文本">
            <span class="行内代码">RAND_MAX</span>是一个宏，它的定义如下：
          </p>
          <figure class="截图容器">
            <img
              src="/Images/Blogs/C语言/随机数/RAND_MAX-宏定义.png"
              alt="RAND_MAX 宏定义"
            />
          </figure>
          <p class="分区普通文本">
            <span class="行内代码">RAND_MAX</span>相当于 16进制：<span
              class="行内代码"
              >7fff</span
            >。我们可以用 10进制 的方式来查看数值：
          </p>
          <figure class="截图容器">
            <img
              src="/Images/Blogs/C语言/随机数/RAND_MAX-10进制数.png"
              alt="RAND_MAX 10进制数值"
            />
          </figure>
          <p class="分区普通文本">
            <span class="行内代码">rand()</span>的生成范围是：<span class="代码"
              ><span style="color: gold">[</span>0
              <span style="color: #bbb">~</span> 32767<span style="color: gold"
                >]</span
              ></span
            >。
          </p>
        </section>
      </li>
    </ul>
    <p class="分区普通文本">
      根据<span class="行内专业名词">2-1</span
      >节，我们用日历时间作为种子，连续生成 10 个随机整数：
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/C语言/随机数/rand()-正常生成.webp"
        alt="rand() 正常生成随机整数"
      />
    </figure>
    <p class="分区普通文本">
      <span class="行内代码">rand()</span>会生成<span class="代码"
        ><span style="color: gold">[</span>0
        <span style="color: #bbb">~</span> 32767<span style="color: gold"
          >]</span
        ></span
      >这个范围里的整数。
    </p>
    <p class="分区普通文本">
      <span class="强调">注意：</span>如果生成频率太快<span class="附加说明"
        >1 秒之内多次生成</span
      >，就会看到重复的数值序列：
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/C语言/随机数/rand()-1秒之内多次生成.webp"
        alt="rand() 1秒之内多次生成随机整数"
      />
    </figure>
    <p class="分区普通文本">
      这是因为<span class="行内专业名词">日历时间</span>这个种子每 1 秒变化 1
      次。
    </p>

    <h3 class="分区标题 分区3级标题">控制随机数范围</h3>
    <p class="分区普通文本">
      <span class="行内代码">rand()</span>的生成范围是：<span class="代码"
        ><span style="color: gold">[</span>0
        <span style="color: #bbb">~</span> 32767<span style="color: gold"
          >]</span
        ></span
      >，但是绝大多数情况下，我们都需要控制随机数的范围，因此需要对生成结果进行二次运算，将数值控制在指定范围内。
    </p>
    <p class="分区普通文本">
      常用的方式是：<span class="行内专业名词">取余数</span
      ><span class="附加说明">也叫<span class="行内专业名词">求模</span></span
      >。比如：<span class="行内专业名词">除以 10 的余数</span>是<span
        class="代码"
        ><span style="color: gold">[</span>0
        <span style="color: #bbb">~</span> 9<span style="color: gold"
          >]</span
        ></span
      >，这就可以控制范围了。假设我们想将范围控制在<span class="代码"
        ><span style="color: gold">[</span>3
        <span style="color: #bbb">~</span> 25<span style="color: gold"
          >]</span
        ></span
      >，可先将整数<span class="行内专业名词">除以 23 取余数</span>，得到<span
        class="代码"
        ><span style="color: gold">[</span>0
        <span style="color: #bbb">~</span> 22<span style="color: gold"
          >]</span
        ></span
      >，再<span class="代码">+3</span>即可。
    </p>
    <pre class="line-numbers">
      <code class="lang-c">
        #include &lt;stdio.h&gt;
        #include &lt;stdlib.h&gt;
        #include &lt;time.h&gt;

        #define RAND_FLOOR 3 //随机范围最小值
        #define RAND_CEIL 25 //随机范围最大值

        int main(int argc, char* argv[]) {
            srand(time(NULL));

            for (int i = 1; i <= 10; i++) {
                int result = rand() % (RAND_CEIL - RAND_FLOOR + 1) + RAND_FLOOR;
                printf("%d, ", result);
            }
        }
      </code>
    </pre>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/C语言/随机数/rand()-控制范围.webp"
        alt="rand() 控制范围"
      />
    </figure>
    <p class="分区普通文本">
      使用公式<span class="代码"
        >rand<span style="color: gold">()</span>
        <span style="color: lightskyblue">%</span>
        <span style="color: gold">(</span>最大值
        <span style="color: lightskyblue">-</span> 最小值
        <span style="color: lightskyblue">+</span> 1<span style="color: gold"
          >)</span
        >
        <span style="color: lightskyblue">+</span> 最小值</span
      >，即可控制随机数的范围。
    </p>

    <h3 class="分区标题 分区3级标题">
      超越<span class="行内代码">RAND_MAX</span>
    </h3>
    <p class="分区普通文本">
      如何生成<span class="行内专业名词">大于</span
      ><span class="行内代码">RAND_MAX</span>的随机数呢？答案也很简单：多个<span
        class="行内代码"
        >rand()</span
      >拼凑即可。
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/C语言/随机数/超越-RAND_MAX.png"
        alt="超越 RAND_MAX"
      />
    </figure>
    <p class="分区普通文本">
      这里只是抛砖引玉，还有很多算法可以实现这个目的。但不论什么算法都遵循一个规则：<span
        class="强调"
        >只用一个</span
      ><span class="行内代码">RAND_MAX</span>是<span class="强调">不行</span
      >的。
    </p>
  </article>
</div>
