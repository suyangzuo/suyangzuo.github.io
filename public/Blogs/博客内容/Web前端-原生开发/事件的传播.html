<article class="专题简介">
  <h1 class="简介标题">事件的传播<span class="原创">原创</span></h1>
  <div class="简介信息">
    <section class="简介信息文本">
      <p class="作者">
        <span class="作者前缀 前缀">作者：</span>
        <span class="作者姓名">苏扬</span>
      </p>
      <p class="日期">
        <span class="日期前缀 前缀">日期：</span>
        <span class="日期文本"><span class="日期文本-数字 日期文本-年">2024</span>年<span class="日期文本-数字 日期文本-月">2</span>月<span class="日期文本-数字 日期文本-日">14</span>日</span>
      </p>
    </section>
    <section class="简介信息图像">
      <img src="/Images/Contributors/苏扬.jpg" alt="苏扬" />
    </section>
  </div>
  <ul class="联系方式列表">
    <li class="联系方式项">
      <a class="联系方式链接" href="mailto:suyangzuo@gmail.com" target="_blank">
        <i class="fa-solid fa-envelope"></i>
      </a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://github.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-github"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.deviantart.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-deviantart"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a class="联系方式链接" href="https://dev.to/suyangzuo" target="_blank"
        ><i class="fa-brands fa-dev"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.freecodecamp.org/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-free-code-camp"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://codepen.io/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-codepen"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://dribbble.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-dribbble"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.artstation.com/user-7893655"
        target="_blank"
        ><i class="fa-brands fa-artstation"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://codesandbox.io/u/suyangzuo"
        target="_blank">
        <img src="/Images/Page-Logos/CodeSandbox.png" alt="CodeSandbox"
      /></a>
    </li>
  </ul>
</article>
<div class="专题正文区">
  <article class="正文分区">
    <h2 class="分区标题 分区2级标题">
      从内向外传播<span class="附加说明">冒泡</span>
    </h2>

    <h3 class="分区标题 分区3级标题">冒泡示例</h3>
    <p class="分区普通文本">假设有嵌套的 3 个元素：</p>
    <pre class="line-numbers">
      <code class="lang-html">
        &lt;div id="外部元素"&gt;
          &lt;div id="中间元素"&gt;
            &lt;div id="内部元素"&gt;&lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      </code>
    </pre>
    <p class="分区普通文本">这 3 个元素分别添加了事件侦听器：</p>
    <pre class="line-numbers">
      <code class="lang-js">
        外部元素.addEventListener("click", () =&gt; {
          console.log("外");
        });
        
        中间元素.addEventListener("click", () =&gt; {
          console.log("中");
        });
        
        内部元素.addEventListener("click", () =&gt; {
          console.log("内");
        });
      </code>
    </pre>
    <p class="分区普通文本">
      想象一下，当你点击元素时，究竟<span class="强调">点击了谁</span>？
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/Web前端-原生开发/事件的传播/点击外元素.gif"
        alt="点击外元素" />
    </figure>
    <p class="分区普通文本">
      当鼠标仅仅位于外部元素时，这样的结果没有任何问题，但如果鼠标同时位于外部和中间元素呢？
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/Web前端-原生开发/事件的传播/点击中外元素.gif"
        alt="点击中外元素.gif" />
    </figure>
    <p class="分区普通文本">
      鼠标既处于中间元素范围内，也处于外部元素范围内，此时你会发现程序先触发中间元素的事件，再触发外部元素的事件。
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/Web前端-原生开发/事件的传播/点击内中外元素.gif"
        alt="点击内中外元素.gif" />
    </figure>
    <p class="分区普通文本">
      鼠标同时位于内、中、外 3
      个元素范围内，而事件触发的顺序非常清晰：从内向外依次触发。这种事件从内向外的传播也叫<span
        class="专业名词"
        >冒泡</span
      >。
    </p>

    <h3 class="分区标题 分区3级标题">停止冒泡</h3>
    <p class="分区普通文本">
      很多时候，我们希望仅仅触发内部元素的点击事件，这时就要阻止事件的冒泡。
    </p>
    <pre class="line-numbers">
      <code class="lang-js">
        内部元素.addEventListener("click", (event) =&gt; {
          event.stopPropagation(); //停止事件冒泡
          console.log("内");
        });
      </code>
    </pre>
    <p class="分区普通文本">
      在事件绑定函数的参数列表中，加入<span class="代码">event</span
      ><span class="附加说明">名称不限定，但要能明确表示这是事件参数</span
      >参数，调用<span class="代码">event</span>对象的<span class="代码"
        >stopPropagation</span
      >函数，即可停止事件冒泡。
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/Web前端-原生开发/事件的传播/停止事件冒泡.gif"
        alt="停止事件冒泡.gif" />
    </figure>
    <p class="分区普通文本">
      由于事件不再向外冒泡，因此仅有内部元素的点击事件被触发。
    </p>
  </article>

  <article class="正文分区">
    <h2 class="分区标题 分区2级标题">
      从前向后传播<span class="附加说明">立即传播</span>
    </h2>

    <h3 class="分区标题 分区3级标题">传播示例</h3>
    <p class="分区普通文本">为元素添加事件监听器：</p>
    <pre class="line-numbers">
      <code class="lang-js">
        元素.addEventListener("click", 任务1);
        元素.addEventListener("click", 任务2);

        function 任务1() {
          console.log("完成任务 - 1");
        }

        function 任务2() {
          console.log("完成任务 - 2");
        }
      </code>
    </pre>
    <p class="分区普通文本">
      元素的<span class="代码">click</span>事件绑定了 2 个函数：<span
        class="行内专业名词"
        >任务1</span
      >和<span class="行内专业名词">任务2</span>，意味着<span class="代码"
        >click</span
      >事件有 2 个事件侦听器。
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/Web前端-原生开发/事件的传播/立即传播.gif"
        alt="立即传播" />
    </figure>
    <p class="分区普通文本">
      <span class="代码">click</span
      >事件绑定的函数，按照顺序运行，这就是多个事件侦听器从前向后传播。
    </p>

    <h3 class="分区标题 分区3级标题">停止立即传播</h3>
    <p class="分区普通文本">
      有时候，我们希望运行完任务 1 就停止，不要再继续了。这里用<span
        class="代码"
        >stopPropagation</span
      >是没用的，因为这不是<span class="行内专业名词">冒泡</span
      >。正确的方式是：
    </p>
    <pre class="line-numbers">
      <code class="lang-js">
        function 任务1(event) {
          event.stopImmediatePropagation(); //停止立即传播
          console.log("完成任务-1");
        }
      </code>
    </pre>
    <p class="分区普通文本">
      <span class="代码">stopImmediatePropagation</span
      >用来停止同一元素的多个事件侦听器向后传播。
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/Web前端-原生开发/事件的传播/停止立即传播.gif"
        alt="停止立即传播" />
    </figure>
    <p class="分区普通文本">
      只有第 1 个事件侦听器运行， 第 2 个事件侦听器被停止。
    </p>
  </article>

  <article class="正文分区">
    <h2 class="分区标题 分区2级标题">总结</h2>

    <h3 class="分区标题 分区3级标题">停止事件传播的方式</h3>
    <ul class="分区列表">
      <li class="分区列表项">
        <span class="代码">event.stopPropagation</span>：停止事件从内向外冒泡
      </li>
      <li class="分区列表项">
        <span class="代码">event.stopImmediatePropagation</span
        >：停止事件从前向后立即传播
      </li>
    </ul>
  </article>
</div>
