<article class="专题简介">
  <h1 class="简介标题">
    <span>备份<span class="次要">与</span>恢复</span
    ><span class="原创">原创</span>
  </h1>
  <div class="简介信息">
    <section class="简介信息文本">
      <p class="作者">
        <span class="作者前缀 前缀">作者：</span>
        <span class="作者姓名">苏扬</span>
      </p>
      <p class="日期">
        <span class="日期前缀 前缀">日期：</span>
        <span class="日期文本"><span class="日期文本-数字 日期文本-年">2024</span>年<span class="日期文本-数字 日期文本-月">3</span>月<span class="日期文本-数字 日期文本-日">4</span>日</span>
      </p>
    </section>
    <section class="简介信息图像">
      <img src="/Images/Contributors/苏扬.jpg" alt="苏扬" />
    </section>
  </div>
  <ul class="联系方式列表">
    <li class="联系方式项">
      <a class="联系方式链接" href="mailto:suyangzuo@gmail.com" target="_blank">
        <i class="fa-solid fa-envelope"></i>
      </a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://github.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-github"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.deviantart.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-deviantart"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a class="联系方式链接" href="https://dev.to/suyangzuo" target="_blank"
        ><i class="fa-brands fa-dev"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.freecodecamp.org/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-free-code-camp"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://codepen.io/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-codepen"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://dribbble.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-dribbble"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.artstation.com/user-7893655"
        target="_blank"
        ><i class="fa-brands fa-artstation"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://codesandbox.io/u/suyangzuo"
        target="_blank"
      >
        <img src="/Images/Page-Logos/CodeSandbox.png" alt="CodeSandbox"
      /></a>
    </li>
  </ul>
</article>
<div class="专题正文区">
  <article class="正文分区">
    <h2 class="分区标题 分区2级标题">备份</h2>

    <h3 class="分区标题 分区3级标题">数据库备份</h3>
    <p class="分区普通文本">
      要对整个数据库进行备份，用命令行运行<span class="专业名词"
        >mysqldump.exe</span
      >文件即可。具体语法如下：
    </p>
    <pre>
      <code class="lang-bash">
        mysqldump -u 用户名 -p 数据库名 > 导出路径/文件名
      </code>
    </pre>
    <p class="分区普通文本">假设有这样一个案例：</p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/MySQL/备份与恢复/MySQL-库表列表.png"
        alt="MySQL 案例"
      />
    </figure>
    <p class="分区普通文本">
      名称为<span class="专业名词">test_db</span
      >的数据库中，包含两个数据表：<span class="专业名词">class_basic</span
      >和<span class="专业名词">student_basic</span>。现在，我们要备份<span
        class="行内专业名词"
        >test_db</span
      >数据库：
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/MySQL/备份与恢复/mysqldump-备份.webp"
        alt="mysqldump 语法演示"
      />
    </figure>
    <p class="分区普通文本">
      运行之后没有任何提示，表示备份成功。此操作实际上相当于备份了<span
        class="行内专业名词"
        >test_db</span
      >数据库内的所有数据表。让我们到<span class="专业名词">d:\杂货铺</span
      >路径下找找备份文件：
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/MySQL/备份与恢复/备份所得文件.png"
        alt="备份所得文件"
      />
    </figure>
    <p class="分区普通文本">
      这就是<span class="行内专业名词">mysqldump</span
      >得到的备份文件，扩展名为<span class="专业名词">.sql</span
      >。用其它扩展名也可以，因为这个文件的内容就是纯文本，只不过按照规范，我们应该使用<span
        class="行内专业名词"
        >.sql</span
      >。
    </p>

    <h3 class="分区标题 分区3级标题">数据表备份</h3>
    <p class="分区普通文本">
      要对单个<span class="附加说明">或几个</span>数据表进行备份，同样调用<span
        class="专业名词"
        >mysqldump.exe</span
      >，语法如下：
    </p>
    <pre>
      <code class="lang-bash">
        mysqldump -u 用户名 -p 数据库名 表1 表2 表3 …… > 导出路径/文件名
      </code>
    </pre>
    <p class="分区普通文本">如果要备份多个数据表，表名之间用空格隔开。</p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/MySQL/备份与恢复/数据表备份命令.webp"
        alt="备份数据表"
      />
    </figure>
    <p class="分区普通文本">
      这样就单独备份了<span class="专业名词">student_basic</span>数据表。
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/MySQL/备份与恢复/数据表备份所得文件.png"
        alt="数据表备份所得文件"
      />
    </figure>
    <p class="分区普通文本">成功得到备份所得文件。</p>
  </article>

  <article class="正文分区">
    <h2 class="分区标题 分区2级标题">恢复</h2>

    <h3 class="分区标题 分区3级标题">
      恢复<span class="附加说明"
        ><span class="行内专业名词">命令行</span>环境</span
      >
    </h3>
    <p class="分区普通文本">
      如果未登录<span class="行内专业名词">MySQL</span
      >，而是处于普通命令行环境下，可以调用<span class="专业名词"
        >mysql.exe</span
      >文件进行还原，语法如下：
    </p>
    <pre>
      <code class="lang-bash">
        mysql -u 用户名 -p 数据库名 < 导入路径/文件名
      </code>
    </pre>
    <p class="分区普通文本">
      为了体现还原效果，在备份<span class="专业名词">test_db</span
      >数据库之后，我们删除了其中所有的数据表：
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/MySQL/备份与恢复/删除所有数据表.png"
        alt="删除所有数据表"
      />
    </figure>
    <p class="分区普通文本">只剩下一个空数据库，里面的数据表全部被删除了。</p>
    <section class="提醒">
      <h3 class="提醒标题">提醒</h3>
      <p class="分区普通文本">
        删除的是数据库内的所有数据表，<span class="强调"
          >数据库本身不能删除<span class="附加说明">删了就重新创建</span></span
        >。如果数据库本身不存在，还原时就会遇到如下错误：
      </p>
      <figure class="截图容器">
        <img
          src="/Images/Blogs/MySQL/备份与恢复/还原时数据库不存在.png"
          alt="还原时数据库不存在"
        />
      </figure>
      <p class="分区普通文本">
        错误 1049：<span class="专业名词">Unknown database 'test_db'</span> →
        <span class="行内专业名词">数据库 'test_db' 不存在</span>。
      </p>
    </section>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/MySQL/备份与恢复/数据表还原命令.webp"
        alt="数据表还原命令"
      />
    </figure>
    <p class="分区普通文本">
      运行命令后，如果没有任何提示，表示还原成功。刷新数据库检查一下：
    </p>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/MySQL/备份与恢复/还原成功后刷新数据库.webp"
        alt="还原成功后刷新数据库"
      />
    </figure>
    <p class="分区普通文本">刷新数据库，发现两张数据表已经成功还原。</p>
    <section class="提醒">
      <h3 class="提醒标题">
        用<span class="行内专业名词">PowerShell</span>还原的问题
      </h3>
      <p class="分区普通文本">
        细心看<span class="行内专业名词">图8</span>，会发现还原时并没有使用<span
          class="专业名词"
          >PowerShell</span
        >，而是用了<span class="专业名词">命令提示符</span
        ><span class="附加说明">cmd</span>。如果用<span class="行内专业名词"
          >PowerShell</span
        >进行还原，会得到如下错误：
      </p>
      <figure class="截图容器">
        <img
          src="/Images/Blogs/MySQL/备份与恢复/PowerShell-保留字符错误提示.png"
          alt="PowerShell 保留字符错误提示"
        />
      </figure>
      <p class="分区普通文本">
        其中红色部分文本提到：<span class="强调"
          ><span class="专业名词">&lt;</span>运算符被保留，未来另有用途</span
        >。
      </p>
      <p class="分区普通文本">
        这就如同你<span class="强调">不能</span>在<span class="行内专业名词"
          >C语言</span
        >中使用<span class="代码">main</span
        >作为标识符一样。因此，还原时要用<span class="行内专业名词"
          >命令提示符</span
        >。
      </p>
    </section>

    <h3 class="分区标题 分区3级标题">
      恢复<span class="附加说明"
        ><span class="行内专业名词">MySQL</span>环境</span
      >
    </h3>
    <p class="分区普通文本">
      如果已经登录<span class="行内专业名词">MySQL</span>，可以用<span
        class="代码"
        >source</span
      >命令还原。<span class="行内代码">source</span>属于<span
        class="行内专业名词"
        >MySQL</span
      >命令，所以不用在意是<span class="行内专业名词">PowerShell</span>还是<span
        class="行内专业名词"
        >命令提示符</span
      >。还原语法如下：
    </p>
    <pre>
      <code class="lang-bash">
        source 导入路径/文件名
      </code>
    </pre>
    <figure class="截图容器">
      <img
        src="/Images/Blogs/MySQL/备份与恢复/source-还原.webp"
        alt="source 命令还原"
      />
    </figure>
    <p class="分区普通文本">
      输入命令后，文件内的数据表会被还原到<span class="强调"
        >当前使用的数据库</span
      >。
    </p>
    <section class="提醒">
      <h3 class="提醒标题">超级提醒！</h3>
      <p class="分区普通文本">
        用<span class="代码">source</span
        >命令还原，无需输入数据库名称，而是直接还原到<span class="强调"
          >当前使用的数据库</span
        >。还原前务必确认自己<span class="强调">当前使用的数据库</span>！！！
      </p>
      <p class="分区普通文本">
        <span class="强调"
          >数据库是企业的命脉，不负责任的操作会导致难以挽回的惨痛后果！</span
        >
      </p>
    </section>
  </article>
</div>
