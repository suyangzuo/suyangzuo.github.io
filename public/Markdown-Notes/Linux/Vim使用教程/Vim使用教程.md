# <center>Vim 使用教程</center>

## 1. Vim 是什么

在学习操作之前，先弄清楚 Vim 是什么。它是一个功能强大的文本编辑器，前身为 Vi。Vi 由 Bill Joy 于 1976 年在 Unix 系统上开发，是类 Unix 平台（Linux、macOS 等）默认提供的标准编辑器。

> Vim 的核心理念：**在不离开键盘的情况下高效编辑文本。**

## 2. Vim 相比 Vi 的改进

| 对比项 | **Vi** | **Vim** |
| :-- | :-- | :-- |
| **全称** | Visual Editor | Vi Improved（Vi 的改进版） |
| **诞生时间** | 1976 年，由 Bill Joy 开发 | 1991 年，由 Bram Moolenaar 开发 |
| **来源** | Unix 系统自带 | 从 Vi 改进而来 |
| **功能定位** | 基本文本编辑器 | 高级、可扩展的文本编辑器 |
| **语法高亮** | ❌ 不支持 | ✅ 支持多语言高亮 |
| **多文件/多窗口** | ❌ 不支持 | ✅ 支持 `:split`、`:vsplit` |
| **撤销功能** | 只能撤销一步 | 多步撤销（撤销树） |
| **搜索与替换** | 基础能力 | 增强搜索，高亮结果 |
| **插件系统** | ❌ 无 | ✅ 强大插件生态（NERDTree、coc.nvim 等） |
| **配置文件** | 固定不可扩展 | `.vimrc` 自由定制 |
| **代码折叠** | ❌ 不支持 | ✅ fold 功能 |
| **鼠标支持** | ❌ 无 | ✅ 可开启 |
| **图形界面** | 无 | GVim / MacVim |
| **兼容性** | Unix 系统内置 | 完全兼容 Vi，扩展更多 |
| **社区** | 几乎无更新 | 活跃，衍生 Neovim |

Vim 因此成为 Linux 世界最常见、最通用的编辑器。

## 3. Vim 与 Nano 的定位
Linux的初学者通常倾向于使用操作更加简单，界面更加美观的nano编辑器，一下对比了两款编辑器的额=
| 编辑器 | 简介 | 适用人群 |
| :-- | :-- | :-- |
| **Vim (Vi Improved)** | 专业级、模式化的键盘效率派 | 程序员、系统管理员、高阶用户 |
| **Nano** | 简洁的命令行编辑器，无需记忆命令 | 初学者、偶尔改配置的用户 |

## 4. 使用教程

### 4.1 检查是否安装 Vim

大多数发行版自带 Vim（或兼容的 Vi），但完整功能的 Vim 可能需要手动安装。使用命令：

```bash
vim --version
```

常见输出字段说明：

- `VIM - Vi IMproved 9.1`：当前安装的主版本。
- `2024 Jan 02`：正式发布日期。
- `compiled Mar 31 2024`：打包进系统的时间。
- `Included patches: 1-16`：已经合入的补丁范围。

### 4.2 基本界面结构

运行 `vim` 或 `vim 文件名` 会进入主界面，可分为：

```
┌──────────────────────────────────────────────┐
│ 文件内容显示区（编辑区）                      │
│ ~（波浪线表示尚未使用的空行）                 │
│----------------------------------------------│
│ 状态栏（Status Line）                         │
│----------------------------------------------│
│ 命令行区域（Command Line Area）               │
└──────────────────────────────────────────────┘
```

### 4.3 三种主要模式

Vim 采用“模式编辑”思想，不同模式下按键含义不同。

| 模式 | 英文 | 进入方式 | 用途 |
| :-- | :-- | :-- | :-- |
| **普通模式** | Normal | 启动默认模式 | 浏览、删除、复制、粘贴、移动 |
| **插入模式** | Insert | 普通模式按 `i` | 输入文本 |
| **命令模式** | Command-Line | 普通模式按 `:` | 保存、退出、替换、查找 |

模式切换速记：

- 普通 → 插入：`i`
- 插入 → 普通：`Esc`
- 普通 → 命令：`:`

底部提示含义：`-- INSERT --` 表示插入模式，出现 `:` 表示正在输入命令，没有提示则处在普通模式。

### 4.4 基本命令

#### 4.4.1 文件操作

| 操作 | 命令 | 说明 |
| :-- | :-- | :-- |
| 打开文件 | `vim 文件名` | 不存在则新建 |
| 保存 | `:w` | 写入修改 |
| 退出 | `:q` | 无修改直接退出 |
| 强制退出 | `:q!` | 丢弃修改 |
| 保存并退出 | `:wq` 或 `:x` | 常用组合命令 |
| 在多个文件间切换 | `vim file1 file2` + `:n` / `:N` | 前后切换 |

#### 4.4.2 插入文本

| 操作 | 命令 | 说明 |
| :-- | :-- | :-- |
| 光标前插入 | `i` | 最常用 |
| 光标后插入 | `a` | append |
| 行首插入 | `I` | 大写 I |
| 行尾插入 | `A` | 大写 A |
| 下一行插入 | `o` | open 新行 |
| 上一行插入 | `O` | 大写 O |

### 4.5 光标移动（普通模式）

发生编辑错误时，先按 `Esc` 退出插入模式再执行命令（如 `u` 撤销）。推荐使用 `h j k l` 控制方向：

| 按键 | 功能 |
| :-- | :-- |
| `h` | 左移 |
| `j` | 下移 |
| `k` | 上移 |
| `l` | 右移 |

常用跳转命令：

| 命令 | 作用 |
| :-- | :-- |
| `0` / `$` | 行首 / 行尾 |
| `gg` / `G` | 文件开头 / 文件结尾 |
| `:n` | 跳到第 n 行（如 `:10`） |
| `Ctrl + f` / `Ctrl + b` | 下一页 / 上一页 |

### 4.6 删除、复制、粘贴、撤销

| 操作 | 命令 | 说明 |
| :-- | :-- | :-- |
| 删除字符 | `x` | 类似 Delete |
| 删除整行 | `dd` | 删除当前行 |
| 删除多行 | `ndd` | 删除 n 行，例如 `3dd` |
| 复制行 | `yy` | yank |
| 复制多行 | `nyy` | 复制 n 行 |
| 粘贴 | `p` | 在光标后粘贴 |
| 撤销 | `u` | 撤销上一步 |
| 重做 | `Ctrl + r` | 恢复被撤销操作 |

### 4.7 搜索与替换

#### 搜索

| 操作 | 命令 | 说明 |
| :-- | :-- | :-- |
| 向下搜索 | `/关键字` | 回车开始搜索 |
| 向上搜索 | `?关键字` | 由下往上 |
| 下一个匹配 | `n` | 顺着方向查找 |
| 上一个匹配 | `N` | 反向查找 |

#### 替换

| 操作 | 命令 | 说明 |
| :-- | :-- | :-- |
| 当前行替换首个匹配 | `:s/旧/新/` | 只替换第一处 |
| 当前行替换全部匹配 | `:s/旧/新/g` | 替换整行所有匹配 |
| 全文替换 | `:%s/旧/新/g` | 全部文件 |
| 全文确认替换 | `:%s/旧/新/gc` | 每次询问 |

### 4.8 显示与界面设置

```vim
:set number       " 显示行号
:set ruler        " 显示光标位置
:set showmode     " 显示当前模式
:set showcmd      " 显示输入命令
:set cursorline   " 高亮所在行
:set tabstop=4    " 制表符等于 4 个空格
```

将以上内容写入 `~/.vimrc` 可自动生效。

### 4.9 正确退出 Vim

| 操作 | 命令 | 说明 |
| :-- | :-- | :-- |
| 保存 | `:w` | 写入但不退出 |
| 退出 | `:q` | 未修改时退出 |
| 保存并退出 | `:wq` 或 `:x` | 保存后退出 |
| 放弃修改退出 | `:q!` | 不保存 |
| 另存为 | `:w 新文件名` | 保存到新文件 |

> ⚠️ 新手易错点：按 `Esc` → 输入命令（例：`:wq`）→ 回车即可退出。

### 4.10 实用技巧

1. **使用内置教程**：运行 `vimtutor`，跟随交互式练习。
2. **坚持练习**：每天花 10 分钟在 Vim 中编辑文本，命令会迅速熟练。
3. **个性化配置**：逐步完善 `~/.vimrc`，添加缩进、配色、快捷键等设置。
4. **升级体验**：尝试 Neovim，它继承 Vim 操作方式但拥有更现代的插件生态。

## 5. 总结

| 主题 | 内容 |
| :-- | :-- |
| **核心理念** | 纯键盘操作，高效编辑 |
| **三种模式** | 普通、插入、命令 |
| **关键命令** | `i` 插入、`Esc` 退出、`:wq` 保存退出 |
| **适合人群** | 程序员、系统管理员、重度终端用户 |
| **入门路径** | `vimtutor` + `.vimrc` 配置 |

🧠 **鲁迅（伪）语录**：  
> Vim 学起来像登山，但登上山顶后，你会发现所有的文本编辑器都在脚下。
