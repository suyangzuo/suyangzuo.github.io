<article class="专题简介">
  <h1 class="简介标题">
    <span>使用<span class="简介标题内名词 中">GCC</span>编译器</span
    ><span class="转载">转载</span>
  </h1>
  <div class="简介信息">
    <section class="简介信息文本">
      <p class="作者">
        <span class="作者前缀 前缀">作者：</span>
        <span class="作者姓名">OpenEuler</span>
      </p>
      <p class="译者">
        <span class="译者前缀 前缀">译者：</span>
        <span class="译者姓名">苏扬</span>
      </p>
      <p class="原文">
        <span class="原文前缀 前缀">原文：</span>
        <span class="原文链接"
          ><a
            class="超链接"
            target="_blank"
            href="https://docs.openeuler.org/zh/docs/22.03_LTS_SP3/docs/ApplicationDev/%E4%BD%BF%E7%94%A8GCC%E7%BC%96%E8%AF%91.html"
            >https://docs.openeuler.org/zh/docs/22.03_LTS_SP3/docs/ApplicationDev/%E4%BD%BF%E7%94%A8GCC%E7%BC%96%E8%AF%91.html</a
          ></span
        >
      </p>
      <p class="日期">
        <span class="日期前缀 前缀">日期：</span>
        <span class="日期文本"><span class="日期文本-数字 日期文本-年">2024</span>年<span class="日期文本-数字 日期文本-月">1</span>月<span class="日期文本-数字 日期文本-日">8</span>日</span>
      </p>
    </section>
    <section class="简介信息图像">
      <img src="/Images/Contributors/苏扬.jpg" alt="苏扬" />
    </section>
  </div>
  <ul class="联系方式列表">
    <li class="联系方式项">
      <a class="联系方式链接" href="mailto:suyangzuo@gmail.com" target="_blank">
        <i class="fa-solid fa-envelope"></i>
      </a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://github.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-github"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.deviantart.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-deviantart"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a class="联系方式链接" href="https://dev.to/suyangzuo" target="_blank"
        ><i class="fa-brands fa-dev"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.freecodecamp.org/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-free-code-camp"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://codepen.io/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-codepen"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://dribbble.com/suyangzuo"
        target="_blank"
        ><i class="fa-brands fa-dribbble"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://www.artstation.com/user-7893655"
        target="_blank"
        ><i class="fa-brands fa-artstation"></i
      ></a>
    </li>
    <li class="联系方式项">
      <a
        class="联系方式链接"
        href="https://codesandbox.io/u/suyangzuo"
        target="_blank"
      >
        <img src="/Images/Page-Logos/CodeSandbox.png" alt="CodeSandbox"
      /></a>
    </li>
  </ul>
</article>
<div class="专题正文区">
  <article class="正文分区">
    <section class="提醒 转载提醒">
      <h3 class="提醒标题">提醒</h3>
    </section>
  </article>
  <article class="正文分区">
    <h2 class="分区标题 分区2级标题">
      <span class="行内专业名词">GCC</span>编译基本规则
    </h2>
    <h3 class="分区标题 分区3级标题">
      <span class="行内专业名词">GCC</span>编译的 4 个流程
    </h3>
    <table class="表格" id="编译流程表">
      <style>
        #编译流程表 tbody > tr > td:nth-child(3) {
          text-align: center;
        }

        #编译流程表 tbody > tr {
          position: relative;
        }

        #编译流程表 .截图容器 {
          position: absolute;
          background-color: #385;
          border: solid 5px #385;
          visibility: hidden;
          opacity: 0;
          z-index: 10;
          top: -15px;
          right: 0;
          box-shadow: 0 10px 25px 0 #000;
          width: 645px;
          transition: 500ms;
          translate: 0 100px;
        }

        #编译流程表 .截图序号 {
          color: white;
        }

        #编译流程表 tbody > tr > td:nth-child(2):hover {
          cursor: url("/Images/Common/鼠标-指向.cur"), pointer;
          background-color: #fffa;
          color: black;
        }

        #编译流程表
          tbody
          > tr:has(> td:nth-child(2):hover)
          > td:nth-child(4)
          > .截图容器 {
          visibility: visible;
          opacity: 1;
          translate: 0;
        }
      </style>
      <caption class="表格标题">
        <span class="行内专业名词">GCC</span
        >编译流程
      </caption>
      <thead class="表头区">
        <tr>
          <th style="width: 65px">序号</th>
          <th style="width: 90px">流程</th>
          <th style="width: 105px">编译选项</th>
          <th>作用</th>
        </tr>
      </thead>
      <tbody class="表身区">
        <tr>
          <th><i class="fa-solid fa-1"></i></th>
          <td class="单元格-居中">预处理</td>
          <td><span class="行内代码">-E</span></td>
          <td>
            <span class="专业名词">预处理器</span>将<span class="行内专业名词"
              >源代码</span
            ><span class="附加说明">如<span class="行内代码">.c</span>文件</span
            >进行<span class="行内专业名词">预处理</span>，生成<span
              class="行内代码"
              >.i</span
            >文件。
            <figure class="截图容器">
              <img
                src="/Images/Blogs/C语言/使用 GCC 编译器/预处理.gif"
                alt="预处理"
              />
            </figure>
          </td>
        </tr>
        <tr>
          <th><i class="fa-solid fa-2"></i></th>
          <td class="单元格-居中">编译</td>
          <td><span class="行内代码">-S</span></td>
          <td>
            <span class="专业名词">编译器</span>将预处理后的<span
              class="行内代码"
              >.i</span
            >文件<span class="行内专业名词">编译</span>成为<span
              class="行内专业名词"
              >汇编代码</span
            >，生成<span class="行内代码">.s</span>文件。
            <figure class="截图容器">
              <img
                src="/Images/Blogs/C语言/使用 GCC 编译器/编译.gif"
                alt="编译"
              />
            </figure>
          </td>
        </tr>
        <tr>
          <th><i class="fa-solid fa-3"></i></th>
          <td class="单元格-居中">汇编</td>
          <td><span class="行内代码">-c</span></td>
          <td>
            <span class="专业名词">汇编器</span>将汇编代码转换为<span
              class="行内专业名词"
              >二进制机器代码</span
            >，生成目标文件<span class="行内代码">.o</span>文件。
            <figure class="截图容器">
              <img
                src="/Images/Blogs/C语言/使用 GCC 编译器/汇编.gif"
                alt="汇编"
              />
            </figure>
          </td>
        </tr>
        <tr>
          <th><i class="fa-solid fa-4"></i></th>
          <td class="单元格-居中">链接</td>
          <td><span class="行内代码">-o</span></td>
          <td>
            <span class="专业名词">链接器</span>将各个模块的<span
              class="行内代码"
              >.o</span
            >文件<span class="行内专业名词">链接</span>起来生成可执行程序<span
              class="行内代码"
              >.exe</span
            >文件。
            <figure class="截图容器">
              <img
                src="/Images/Blogs/C语言/使用 GCC 编译器/链接.gif"
                alt="链接"
              />
            </figure>
          </td>
        </tr>
      </tbody>
      <tfoot class="表脚区">
        <tr>
          <th colspan="4">将鼠标悬停在流程名称上，可观看代码演示。</th>
        </tr>
      </tfoot>
    </table>
    <section class="提醒">
      <h3 class="提醒标题">提醒</h3>
      <p>
        有人可能注意到，整个流程统称为<span class="行内专业名词">编译</span
        >，第2个步骤也叫<span class="行内专业名词">编译</span
        >。我们平时所说的<span class="行内专业名词">编译</span
        >，指的是包含全部4个步骤的<span class="强调">整体流程。</span><br />
        其中<span class="行内代码">.i</span>文件、<span class="行内代码"
          >.s</span
        >文件、<span class="行内代码">.o</span
        >文件，是中间文件或临时文件，如果使用GCC一次性完成C语言程序的编译，则这些文件会被删除。
      </p>
      <figure class="截图容器">
        <img
          src="/Images/Blogs/C语言/使用 GCC 编译器/一次性编译.gif"
          alt="一次性编译"
        />
      </figure>
      <p class="分区普通文本">
        一次性编译，将 4 个步骤合而为一，直接从源代码文件得到可执行文件。
      </p>
    </section>

    <h3 class="分区标题 分区3级标题">
      <span class="行内专业名词">GCC</span>常用文件类型
    </h3>
    <table class="表格" id="GCC常用文件类型表">
      <style>
        #GCC常用文件类型表 .表身区 tr:nth-child(odd) {
          background-color: var(--表身区-奇数行背景色);
        }

        #GCC常用文件类型表 td {
          padding: 15px;
        }
      </style>
      <caption class="表格标题">
        <span class="行内专业名词">GCC</span
        >常用文件类型
      </caption>
      <thead class="表头区">
        <tr>
          <th style="width: 90px !important">扩展名</th>
          <th>说明</th>
        </tr>
      </thead>
      <tbody class="表身区">
        <tr>
          <td><span class="行内代码">.c</span></td>
          <td><span class="专业名词">C语言</span>源代码文件</td>
        </tr>
        <tr>
          <td>
            <span class="行内代码">.C</span><br />
            <span class="行内代码">.cc</span><br />
            <span class="行内代码">.cxx</span>
          </td>
          <td><span class="专业名词">C++</span>源代码文件</td>
        </tr>
        <tr>
          <td><span class="行内代码">.m</span></td>
          <td><span class="专业名词">Objective-C</span>源代码文件</td>
        </tr>
        <tr>
          <td><span class="行内代码">.s</span></td>
          <td><span class="专业名词">汇编语言</span> 源代码文件</td>
        </tr>
        <tr>
          <td><span class="行内代码">.i</span></td>
          <td>已经预处理的<span class="专业名词">C语言</span>源代码文件</td>
        </tr>
        <tr>
          <td><span class="行内代码">.ii</span></td>
          <td>已经预处理的<span class="专业名词">C++</span>源代码文件</td>
        </tr>
        <tr>
          <td><span class="行内代码">.S</span></td>
          <td>已经预处理的<span class="专业名词">汇编语言</span>源代码文件</td>
        </tr>
        <tr>
          <td><span class="行内代码">.h</span></td>
          <td>C程序所包含的<span class="专业名词">头文件</span></td>
        </tr>
        <tr>
          <td><span class="行内代码">.o</span></td>
          <td>编译后的二进制代码<span class="专业名词">目标文件</span></td>
        </tr>
        <tr>
          <td>
            <span class="行内代码">.so</span><br /><span class="行内代码"
              >.dll</span
            >
          </td>
          <td>
            <span class="专业名词">动态链接库</span>，它是一种特殊的目标文件
          </td>
        </tr>
        <tr>
          <td>
            <span class="行内代码">.a</span><br /><span class="行内代码"
              >.lib</span
            >
          </td>
          <td><span class="专业名词">静态链接库</span></td>
        </tr>
        <tr>
          <td>
            <span class="行内代码">.out</span><br /><span class="行内代码"
              >.exe</span
            >
          </td>
          <td>
            <span class="专业名词">可执行文件</span
            >，但可执行文件没有统一的后缀，系统从文件的属性来区分可执行文件和不可执行文件。如果没有给出可执行文件的名字，GCC将生成一个名为
            a.out 的文件。
          </td>
        </tr>
      </tbody>
    </table>

    <h3 class="分区标题 分区3级标题">
      <span class="行内专业名词">GCC</span>常用编译选项
    </h3>
    <table class="表格" id="GCC编译参数表">
      <style>
        tbody > tr > td:nth-child(3) > .行内代码 {
          margin: 0;
        }

        #GCC编译参数表 td {
          padding: 15px;
        }
      </style>
      <caption class="表格标题">
        <span class="行内专业名词">GCC</span
        >编译选项
      </caption>
      <thead class="表头区">
        <tr>
          <th style="width: 80px">选项</th>
          <th>说明</th>
          <th style="width: 320px">示例</th>
        </tr>
      </thead>
      <tbody class="表身区">
        <tr>
          <th><span class="行内代码">-E</span></th>
          <td>
            预处理指定的源文件，但不进行编译。<br />默认情况下，预处理器的输出会被导入到标准输出流（如显示器），可以利用
            -o 选项把它导入到某个输出文件。
          </td>
          <td><span class="行内代码">gcc -E circle.c -o circle.i</span></td>
        </tr>
        <tr>
          <th><span class="行内代码">-S</span></th>
          <td>
            编译指定的源文件生成以<span class="行内代码">.s</span
            >作为后缀的汇编语言文件，但不进行汇编。
          </td>
          <td><span class="行内代码">gcc -S circle.c</span></td>
        </tr>
        <tr>
          <th><span class="行内代码">-c</span></th>
          <td>
            编译、汇编指定的源文件生成目标文件，但不进行链接。通常用于编译不包含主程序的子程序文件。
          </td>
          <td><span class="行内代码">gcc -c test1.c test2.c</span></td>
        </tr>
        <tr>
          <th><span class="行内代码">-o</span></th>
          <td>
            链接并生成可执行文件
            <span class="强调">或</span>
            一次性编译并生成可执行文件。如果忽略此参数，会生成默认名称为<span
              class="行内专业名词"
              >a.exe</span
            >的可执行文件。
          </td>
          <td><span class="行内代码">gcc main.c func.c -o app.out</span></td>
        </tr>
        <tr>
          <th><span class="行内代码">-Wall</span></th>
          <td>
            选项<span class="行内代码">-Wall</span>会使 GCC
            启用所有警告类型，其中包括关于未使用的变量、未初始化的变量、可能更改值的隐式转换等。<span
              class="强调"
              >注意：启用所有警告并不意味着编译器会拒绝带有警告的代码。</span
            ><span class="行内代码" style="margin-left: 0">-Wall</span
            >只是使编译器打印有关潜在问题的警告。是否处理这些警告由程序员决定。
          </td>
          <td><span class="行内代码">gcc -Wall myfile.c</span></td>
        </tr>
        <tr>
          <th><span class="行内代码">-I</span></th>
          <td>
            指定搜索<span class="行内专业名词">.h</span>头文件的<span
              class="行内专业名词"
              >include</span
            >路径。
          </td>
          <td><span class="行内代码">gcc -I "d:/include"</span></td>
        </tr>
        <tr>
          <th><span class="行内代码">-L</span></th>
          <td>
            指定搜索<span class="行内专业名词">.dll</span>动态链接库的路径。
          </td>
          <td><span class="行内代码">gcc -L "d:/dlls"</span></td>
        </tr>
        <tr>
          <th><span class="行内代码">-l</span></th>
          <td>
            指定链接的<span class="行内专业名词">.dll</span>动态链接库文件名。
          </td>
          <td><span class="行内代码">gcc -L "d:/dlls" -l libmysql</span></td>
        </tr>
      </tbody>
    </table>
  </article>
</div>
